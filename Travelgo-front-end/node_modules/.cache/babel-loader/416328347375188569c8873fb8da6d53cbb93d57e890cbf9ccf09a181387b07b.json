{"ast":null,"code":"var _jsxFileName = \"E:\\\\Final_Project\\\\TravelGo\\\\TravelGo\\\\Travelgo-front-end\\\\src\\\\components\\\\PropertyDetailsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PropertyDetailsPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [details, setDetails] = useState(null);\n  const location = useLocation();\n  const {\n    property_id,\n    traveller_id,\n    checkinDate,\n    checkoutDate,\n    logid,\n    name\n  } = location.state;\n  console.log(property_id);\n  const fetchDetails = async () => {\n    try {\n      const response = await fetch(\"http://localhost:8080/getselectedproperty?id_property=\" + property_id);\n      if (response.ok) {\n        const data = await response.json();\n        setDetails(data);\n      } else {\n        console.log('Failed to fetch profile data');\n      }\n    } catch (error) {\n      console.error('Error fetching profile data:', error);\n    }\n  };\n  useEffect(() => {\n    fetchDetails();\n  }, []);\n  const handleConfirmBooking = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/savebooking', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          prop_id: property_id,\n          travel_id: traveller_id,\n          // this is the travel_id of the user\n          checkin: checkinDate,\n          checkout: checkoutDate,\n          totalfare: 100000,\n          pay_mode: \"online\",\n          amount: 1000\n        })\n      });\n      if (response.ok) {\n        console.log('Booking request sent successfully.');\n        navigate('/travellerPage', {\n          state: {\n            logid,\n            name\n          }\n        });\n      } else {\n        console.log('Failed to send booking request.');\n      }\n    } catch (error) {\n      console.error('Error sending booking request:', error);\n    }\n  };\n\n  // Function to calculate the check-out date (you can adjust the logic as needed)\n  const calculateCheckoutDate = checkinDate => {\n    const checkin = new Date(checkinDate);\n    const checkout = new Date(checkin);\n    checkout.setDate(checkout.getDate() + 1); // Assuming one-day stay\n    return checkout.toISOString().split('T')[0]; // Format as \"YYYY-MM-DD\"\n  };\n\n  //const amenity = details.id_ammenity.id_ammenity == null ? true : false;\n  // console.log(details.id_ammenity.rooms);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"property-details-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"property-images\",\n      children: details ? /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: 400,\n          height: 400\n        },\n        src: `data:image/jpeg;base64,${details.pictures}`,\n        className: \"img-fluid hover-shadow\",\n        alt: details.id_property\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading image...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"property-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Property Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 12\n          }, this), \" \", details ? details.address : 'Loading...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"City:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 12\n          }, this), \" \", details ? details.city : 'Loading...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Room:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 12\n          }, this), \" \", details ? details.id_ammenity.rooms : 'Loading...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"HomeType\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 12\n          }, this), \" \", details ? details.id_ammenity.home_type : 'Loading...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 12\n          }, this), \" \", details ? details.id_ammenity.summary : 'Loading...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleConfirmBooking,\n        children: \"Confirm Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(PropertyDetailsPage, \"uEYxvhFZQqNTOh15EFGC8SJnQ5w=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = PropertyDetailsPage;\nexport default PropertyDetailsPage;\nvar _c;\n$RefreshReg$(_c, \"PropertyDetailsPage\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","jsxDEV","_jsxDEV","PropertyDetailsPage","_s","navigate","details","setDetails","location","property_id","traveller_id","checkinDate","checkoutDate","logid","name","state","console","log","fetchDetails","response","fetch","ok","data","json","error","handleConfirmBooking","method","headers","body","JSON","stringify","prop_id","travel_id","checkin","checkout","totalfare","pay_mode","amount","calculateCheckoutDate","Date","setDate","getDate","toISOString","split","className","children","style","width","height","src","pictures","alt","id_property","fileName","_jsxFileName","lineNumber","columnNumber","address","city","id_ammenity","rooms","home_type","summary","onClick","_c","$RefreshReg$"],"sources":["E:/Final_Project/TravelGo/TravelGo/Travelgo-front-end/src/components/PropertyDetailsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst PropertyDetailsPage = () => {\r\n  const navigate = useNavigate();\r\n  const [details, setDetails] = useState(null);\r\n  const location = useLocation();\r\n  const  { property_id, traveller_id, checkinDate, checkoutDate, logid, name } = location.state;\r\n\r\n  console.log(property_id);\r\n\r\n  \r\n\r\n  const fetchDetails = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:8080/getselectedproperty?id_property=\"+property_id);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setDetails(data);\r\n      } else {\r\n        console.log('Failed to fetch profile data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching profile data:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDetails();\r\n  }, []);\r\n\r\n\r\n  const handleConfirmBooking = async () => {\r\n     \r\n    try {\r\n      const response = await fetch('http://localhost:8080/savebooking', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          prop_id: property_id,\r\n          travel_id: traveller_id, // this is the travel_id of the user\r\n          checkin: checkinDate,\r\n          checkout: checkoutDate,\r\n          totalfare: 100000,\r\n          pay_mode:\"online\",\r\n          amount:1000\r\n        }),\r\n      });\r\n  \r\n      if (response.ok) {\r\n        console.log('Booking request sent successfully.');\r\n        navigate('/travellerPage', { state: { logid, name} });\r\n\r\n      } else {\r\n        console.log('Failed to send booking request.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending booking request:', error);\r\n    }\r\n  };\r\n\r\n   // Function to calculate the check-out date (you can adjust the logic as needed)\r\n   const calculateCheckoutDate = (checkinDate) => {\r\n    const checkin = new Date(checkinDate);\r\n    const checkout = new Date(checkin);\r\n    checkout.setDate(checkout.getDate() + 1); // Assuming one-day stay\r\n    return checkout.toISOString().split('T')[0]; // Format as \"YYYY-MM-DD\"\r\n    };\r\n\r\n    //const amenity = details.id_ammenity.id_ammenity == null ? true : false;\r\n    // console.log(details.id_ammenity.rooms);\r\n\r\n\r\n  return (\r\n    <div className=\"property-details-container\">\r\n    <div className=\"property-images\">\r\n      {details ? (\r\n        <img\r\n          style={{ width: 400, height: 400 }}\r\n          src={`data:image/jpeg;base64,${details.pictures}`}\r\n          className='img-fluid hover-shadow'\r\n          alt={details.id_property}\r\n        />\r\n      ) : (\r\n        <div>Loading image...</div>\r\n      )}\r\n    </div>\r\n    <div className=\"property-details\">\r\n      <h2>Property Details</h2>\r\n      <div>\r\n        <p><strong>Address:</strong> {details ? details.address : 'Loading...'}</p>\r\n        <p><strong>City:</strong> {details ? details.city : 'Loading...'}</p>\r\n        <p><strong>Room:</strong> {details ? details.id_ammenity.rooms : 'Loading...'}</p>\r\n        <p><strong>HomeType</strong> {details ? details.id_ammenity.home_type : 'Loading...'}</p>\r\n        <p><strong>Summary</strong> {details ? details.id_ammenity.summary : 'Loading...'}</p>\r\n         \r\n        \r\n      </div>\r\n      <button onClick={handleConfirmBooking}>Confirm Booking</button>\r\n    </div>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default PropertyDetailsPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}