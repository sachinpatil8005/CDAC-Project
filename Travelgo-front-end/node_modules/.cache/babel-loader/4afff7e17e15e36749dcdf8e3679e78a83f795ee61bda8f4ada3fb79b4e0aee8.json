{"ast":null,"code":"var _jsxFileName = \"E:\\\\Final_Project\\\\TravelGo\\\\TravelGo\\\\Travelgo-front-end\\\\src\\\\components\\\\Log.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  uid: '',\n  pwd: '',\n  loading: false,\n  error: ''\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_FIELD':\n      return {\n        ...state,\n        [action.field]: action.value\n      };\n    case 'START_LOADING':\n      return {\n        ...state,\n        loading: true,\n        error: ''\n      };\n    case 'STOP_LOADING':\n      return {\n        ...state,\n        loading: false\n      };\n    case 'SET_ERROR':\n      return {\n        ...state,\n        error: action.message,\n        loading: false\n      };\n    default:\n      return state;\n  }\n};\nfunction Log() {\n  _s();\n  const navigate = useNavigate();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const {\n    uid,\n    pwd,\n    loading,\n    error\n  } = state;\n  const handleSubmit = async e => {\n    e.preventDefault();\n    dispatch({\n      type: 'START_LOADING'\n    });\n    try {\n      const response = await fetch('http://localhost:8080/checklogin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          uid,\n          pwd\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        const roleId = data.role_id;\n        const status = data.status;\n        if (roleId === 0) {\n          const logid = data.uid;\n          const name = data.name;\n          navigate('/adminPage', {\n            state: {\n              logid,\n              name\n            }\n          });\n        } else if (roleId === 1 && status != 0) {\n          const logid = data.id_login;\n          const password = pwd;\n          navigate('/hostPage', {\n            state: {\n              logid,\n              password\n            }\n          });\n        } else if (roleId === 2 && status != 0) {\n          const logid = data.id_login;\n          const name = data.name;\n          navigate('/travellerPage', {\n            state: {\n              logid,\n              name\n            }\n          });\n        } else {\n          dispatch({\n            type: 'SET_ERROR',\n            message: 'Invalid user credentials'\n          });\n        }\n      } else {\n        dispatch({\n          type: 'SET_ERROR',\n          message: 'Invalid user credentials'\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      dispatch({\n        type: 'SET_ERROR',\n        message: 'Invalid user credentials'\n      });\n    }\n  };\n  const handleFieldChange = (field, value) => {\n    dispatch({\n      type: 'SET_FIELD',\n      field,\n      value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-center mb-4\",\n            children: \"Log in to TravelGo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                value: uid,\n                onChange: e => handleFieldChange('uid', e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control\",\n                value: pwd,\n                onChange: e => handleFieldChange('pwd', e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary btn-block\",\n              disabled: loading,\n              children: loading ? 'Logging in...' : 'Log in'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger mt-3\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: \"Please enter your credentials.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-3 text-center\",\n            children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/choice\",\n              className: \"nav-lin px3\",\n              children: \"Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(Log, \"Mj7rz1bVB1wm2J5dk325KeZHNCE=\", false, function () {\n  return [useNavigate];\n});\n_c = Log;\nexport default Log;\nvar _c;\n$RefreshReg$(_c, \"Log\");","map":{"version":3,"names":["React","useReducer","useNavigate","Link","jsxDEV","_jsxDEV","initialState","uid","pwd","loading","error","reducer","state","action","type","field","value","message","Log","_s","navigate","dispatch","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","roleId","role_id","status","logid","name","id_login","password","console","handleFieldChange","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","target","required","disabled","to","_c","$RefreshReg$"],"sources":["E:/Final_Project/TravelGo/TravelGo/Travelgo-front-end/src/components/Log.js"],"sourcesContent":["import React, { useReducer } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst initialState = {\r\n  uid: '',\r\n  pwd: '',\r\n  loading: false,\r\n  error: '',\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SET_FIELD':\r\n      return { ...state, [action.field]: action.value };\r\n    case 'START_LOADING':\r\n      return { ...state, loading: true, error: '' };\r\n    case 'STOP_LOADING':\r\n      return { ...state, loading: false };\r\n    case 'SET_ERROR':\r\n      return { ...state, error: action.message, loading: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction Log() {\r\n  const navigate = useNavigate();\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const { uid, pwd, loading, error } = state;\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: 'START_LOADING' });\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:8080/checklogin', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ uid, pwd }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const roleId = data.role_id;\r\n        const status = data.status; \r\n\r\n\r\n\r\n        if (roleId === 0 ) {\r\n          const logid = data.uid;\r\n          const name = data.name;\r\n          navigate('/adminPage', { state: { logid, name } });\r\n\r\n        } else if (roleId === 1 && status != 0) {\r\n          const logid = data.id_login;\r\n          const password = pwd;\r\n          navigate('/hostPage', { state: { logid, password } });\r\n          \r\n        } else if (roleId === 2 && status != 0) {\r\n          const logid = data.id_login;\r\n          const name = data.name;\r\n          navigate('/travellerPage', { state: { logid, name } });\r\n          \r\n        }else {\r\n          dispatch({ type: 'SET_ERROR', message: 'Invalid user credentials' });\r\n        }\r\n\r\n      } else {\r\n        dispatch({ type: 'SET_ERROR', message: 'Invalid user credentials' });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      dispatch({ type: 'SET_ERROR', message: 'Invalid user credentials' });\r\n    }\r\n  };\r\n\r\n  const handleFieldChange = (field, value) => {\r\n    dispatch({ type: 'SET_FIELD', field, value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card p-4\">\r\n            <h2 className=\"text-center mb-4\">Log in to TravelGo</h2>\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label>Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  value={uid}\r\n                  onChange={(e) => handleFieldChange('uid', e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  value={pwd}\r\n                  onChange={(e) => handleFieldChange('pwd', e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n              <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={loading}>\r\n                {loading ? 'Logging in...' : 'Log in'}\r\n              </button>\r\n            </form>\r\n            {error && <div className=\"alert alert-danger mt-3\">{error}</div>}\r\n            <div className=\"mt-3\">Please enter your credentials.</div>\r\n            <p className=\"mt-3 text-center\">\r\n              Don't have an account? <Link to=\"/choice\" className=\"nav-lin px3\">Sign up</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Log;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}